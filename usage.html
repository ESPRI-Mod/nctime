

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Generic usage &mdash; nctime 4.4.8 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="nctime 4.4.8 documentation" href="index.html"/>
        <link rel="next" title="Check time series continuity" href="overlap.html"/>
        <link rel="prev" title="Configuration" href="configuration.html"/> 

  
  <script src="static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> nctime
          

          
          </a>

          
            
            
              <div class="version">
                4.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generic usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#check-the-help">Check the help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#check-the-version">Check the version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debug-mode">Debug mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#print-all-results">Print all results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specify-the-project">Specify the project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submit-a-configuration-directory">Submit a configuration directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-filters">Use filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-a-logfile">Use a logfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-multiprocessing">Use multiprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-libigcm-infos">Use libIGCM infos</a></li>
<li class="toctree-l2"><a class="reference internal" href="#define-a-reference-calendar">Define a reference calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#define-reference-time-units">Define reference time units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overwrites-a-frequency-increment">Overwrites a frequency increment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exit-status">Exit status</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="overlap.html">Check time series continuity</a></li>
<li class="toctree-l1"><a class="reference internal" href="axis.html">Check time axis squareness</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc.html">Code documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">nctime</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Generic usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="generic-usage">
<span id="usage"></span><h1>Generic usage<a class="headerlink" href="#generic-usage" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All the following arguments can be safely combined and add to the subcommand arguments.</p>
</div>
<div class="section" id="check-the-help">
<h2>Check the help<a class="headerlink" href="#check-the-help" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime <span class="o">{</span>-h,--help<span class="o">}</span>
$&gt; nctime SUBCOMMAND <span class="o">{</span>-h,--help<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="check-the-version">
<h2>Check the version<a class="headerlink" href="#check-the-version" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime <span class="o">{</span>-v,--version<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="debug-mode">
<h2>Debug mode<a class="headerlink" href="#debug-mode" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --debug
</pre></div>
</div>
</div>
<div class="section" id="print-all-results">
<h2>Print all results<a class="headerlink" href="#print-all-results" title="Permalink to this headline">¶</a></h2>
<p>Default is to only print errors, to change this and print all results:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --all
</pre></div>
</div>
</div>
<div class="section" id="specify-the-project">
<h2>Specify the project<a class="headerlink" href="#specify-the-project" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">-p/--project</span></code> argument is used to parse the corresponding configuration INI file. It is <strong>always required</strong>
(except for <code class="docutils literal"><span class="pre">fetch-ini</span></code> subcommand). This argument is case-sensitive and has to correspond to a section name of
the configuration file(s).</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND <span class="o">{</span>-p,--project<span class="o">}</span> PROJECT_ID
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If not submitted it takes the PROJECT_ID from the netCDF global attribute of the first file scanned.</p>
</div>
</div>
<div class="section" id="submit-a-configuration-directory">
<h2>Submit a configuration directory<a class="headerlink" href="#submit-a-configuration-directory" title="Permalink to this headline">¶</a></h2>
<p>By default, the configuration files are fetched or read from <code class="docutils literal"><span class="pre">/esg/config/esgcet</span></code> that is the usual configuration
directory on ESGF nodes. If you’re preparing your data outside of an ESGF node, you can submit another directory to
fetch and read the configuration files.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND -i /PATH/TO/CONFIG/
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If not submitted it takes the $ESGINI environment variable. If not exists the usual datanode path is used (i.e., <code class="docutils literal"><span class="pre">/esg/config/esgcet</span></code>)</p>
</div>
</div>
<div class="section" id="use-filters">
<h2>Use filters<a class="headerlink" href="#use-filters" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">nctime</span></code> subcommands will scan your local archive to achieve data quality check. In such a scan, you can filter the file discovery by using a Python regular expression
(see <a class="reference external" href="https://docs.python.org/2/library/re.html">re</a> Python library).</p>
<p>The default is to walk through your local filesystem ignoring the hidden folders.
It can be change with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --ignore-dir PYTHON_REGEX
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">nctime</span></code> only considers unhidden NetCDF files by default excuding the regular expression <code class="docutils literal"><span class="pre">^\..*$</span></code> and
including the following one <code class="docutils literal"><span class="pre">.*\.nc$</span></code>. It can be independently change with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --include-file PYTHON_REGEX --exclude-file PYTHON_REGEX
</pre></div>
</div>
<p>Keep in mind that <code class="docutils literal"><span class="pre">--ignore-dir</span></code> and <code class="docutils literal"><span class="pre">--exclude-file</span></code> specifie a directory pattern <strong>NOT</strong> to be matched, while
<code class="docutils literal"><span class="pre">--include-file</span></code> specifies a filename pattern <strong>TO BE</strong> matched.</p>
</div>
<div class="section" id="use-a-logfile">
<h2>Use a logfile<a class="headerlink" href="#use-a-logfile" title="Permalink to this headline">¶</a></h2>
<p>All errors and exceptions are logged into a file named <code class="docutils literal"><span class="pre">nctime-YYYYMMDD-HHMMSS-PID.err</span></code>.
Other information are logged into a file named <code class="docutils literal"><span class="pre">nctime-YYYYMMDD-HHMMSS-PID.log</span></code> only if <code class="docutils literal"><span class="pre">--log</span></code> is submitted.
If not, the standard output is used following the verbose mode.
By default, the logfiles are stored in a <code class="docutils literal"><span class="pre">logs</span></code> folder created in your current working directory (if not exists).
It can be changed by adding a optional logfile directory to the flag.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND <span class="o">{</span>-l,--log<span class="o">}</span>
$&gt; nctime SUBCOMMAND -l /PATH/TO/LOGDIR/
</pre></div>
</div>
</div>
<div class="section" id="use-multiprocessing">
<h2>Use multiprocessing<a class="headerlink" href="#use-multiprocessing" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">nctime</span></code> uses a multiprocessing interface. This is useful to process a large amount of data, especially in the case
of <code class="docutils literal"><span class="pre">axis</span></code> subcommands with the time axis calculation. Set the number of maximal processes to simultaneously treat
several files. One process seems sequential processing (the default). Set it -1 to use all available CPU processes
(as returned by <code class="docutils literal"><span class="pre">multiprocessing.cpu_count()</span></code>). Default is set to 4 processes.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --max-processes <span class="m">4</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The number of maximal processes is limited to the maximum CPU count in any case.</p>
</div>
</div>
<div class="section" id="use-libigcm-infos">
<h2>Use libIGCM infos<a class="headerlink" href="#use-libigcm-infos" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">nctime</span></code> can use your libIGCM info to automatically apply some configuration. This requires to submit the
directory including both your <code class="docutils literal"><span class="pre">config.card</span></code> and <code class="docutils literal"><span class="pre">run.card</span></code> provided by the libIGCM framework:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --card /PATH/TO/SUBMISSION/DIRECTORY
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This detailed documentation of <code class="docutils literal"><span class="pre">nctime</span> <span class="pre">overlap</span></code> and <code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This option is only available if you run your simulation within the IPSL libICM framework.</p>
</div>
</div>
<div class="section" id="define-a-reference-calendar">
<h2>Define a reference calendar<a class="headerlink" href="#define-a-reference-calendar" title="Permalink to this headline">¶</a></h2>
<p>The reference calendar is the calendar use by <code class="docutils literal"><span class="pre">nctime</span></code> to rebuilt theoretical dates during the whole check.
By default, the reference calendar is one from the first file scanned.
You can specify your own reference calendar with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --calendar CALENDAR
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Available calendars are those from CF conventions: gregorian, standard, proleptic_gregorian, noleap, 365_day, all_leap, 366_day, 360_day.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The reference calendar is use for all the files scanned during the check.</p>
</div>
</div>
<div class="section" id="define-reference-time-units">
<h2>Define reference time units<a class="headerlink" href="#define-reference-time-units" title="Permalink to this headline">¶</a></h2>
<p>The reference time units are use by <code class="docutils literal"><span class="pre">nctime</span></code> to rebuilt theoretical dates during the whole check.
By default, the reference time units are those from the first file scanned.
You can specify your own reference time units with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --units <span class="s2">&quot;{seconds,minutes,hours,days} since YYYY-MM-DD [HH:mm:ss]&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Available units format is the one from CF conventions: “&lt;units&gt; since YYYY-MM-DD [HH:mm:ss]” where <code class="docutils literal"><span class="pre">&lt;units&gt;</span></code> stands for seconds, minutes, hours or days.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The reference time units are use for all the files scanned during the check.</p>
</div>
</div>
<div class="section" id="overwrites-a-frequency-increment">
<h2>Overwrites a frequency increment<a class="headerlink" href="#overwrites-a-frequency-increment" title="Permalink to this headline">¶</a></h2>
<p>By default, each supported frequency as its own unit and increment (e.g. mon = 1 months). In some case the frequency
increment or units can be change, at least for diagnostic purposes. For finer modification, the increment is change for
a couple of MIP TABLE and FREQUENCY. The “all” keyword can be use to change the time increment for “all” table or “all”
frequencies values.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --set-inc TABLE:FREQUENCY<span class="o">=</span>INCREMENT<span class="o">[</span>+<span class="o">]</span>UNITS
</pre></div>
</div>
<p>To change the time increment of sub-hourly files from the CFsubhr table from 30min to 15min:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --set-inc CFsubhr:subhrPt<span class="o">=</span>15m
</pre></div>
</div>
<p>To change the time increment of all sub-hourly files whatever the MIP table:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --set-inc all:subhr<span class="o">=</span>15m
</pre></div>
</div>
<p>To change the time increment of all CFsubhr files whatever the frequency:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; nctime SUBCOMMAND --set-inc CFsubhr:all<span class="o">=</span>15m
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Duplicate the flag to overwrite several frequency increment.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Available increment units are: s (seconds), m (minutes), h (hours), D (days), M (months) and Y (years).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Default increments are those expected by CMIP specifications. Overwrite them could lead to non CMIP-compliant files.</p>
</div>
</div>
<div class="section" id="exit-status">
<h2>Exit status<a class="headerlink" href="#exit-status" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>Status = 0</dt>
<dd>All the files have been successfully processed without errors.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Status = N</dt>
<dd>Errors occur during file scanning and quality checkup. N is the number of errors</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Status = -1</dt>
<dd>Argument parsing error.</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="overlap.html" class="btn btn-neutral float-right" title="Check time series continuity" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Levavasseur, G..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.4.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="static/jquery.js"></script>
      <script type="text/javascript" src="static/underscore.js"></script>
      <script type="text/javascript" src="static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>