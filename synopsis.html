

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Synopsis &mdash; nctime 3.9.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="nctime 3.9.6 documentation" href="index.html"/>
        <link rel="next" title="Installation" href="installation.html"/>
        <link rel="prev" title="nctime toolbox" href="index.html"/> 

  
  <script src="static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> nctime
          

          
          </a>

          
            
            
              <div class="version">
                3.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Synopsis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nctime-axis"><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#nctime-overlap"><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">overlap</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-features">Key features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage and tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc.html">Code documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">nctime</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Synopsis</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="sources/synopsis.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="synopsis">
<span id="id1"></span><h1>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h1>
<p>NetCDF files describe all dimensions necessary to work with. In the climate community, this format is widely used
following the <a class="reference external" href="http://cfconventions.org/">CF conventions</a>. Dimensions such as longitude, latitude and time are
included in NetCDF files as vectors.</p>
<p>Time is a key dimension from NetCDF files that could lead to flawed studies or unused data if misdeclared. <code class="docutils literal"><span class="pre">nctime</span></code>
allows researchers to easily diagnose the time definition of their data to ensure a proper analysis.</p>
<div class="section" id="nctime-axis">
<h2><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code><a class="headerlink" href="#nctime-axis" title="Permalink to this headline">¶</a></h2>
<p>Unfortunately, the time axis is often mistaken in files from coupled climate models and leads to flawed studies or
unused data. Consequently, these files cannot be used or, even worse, produced erroneous results, due to problems in the
time axis description.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To rebuild a proper time axis, the dates from filename are expected to set the first time boundary and not
the middle of the time interval. This is always the case for the instantaneous axis or frequencies greater than the
daily frequency. Consequently, the 3-6 hourly files with an averaged time axis requires a date time correction.</p>
</div>
</div>
<div class="section" id="nctime-overlap">
<h2><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">overlap</span></code><a class="headerlink" href="#nctime-overlap" title="Permalink to this headline">¶</a></h2>
<p>To produce smaller files, the NetCDF files are splitted over the time period. Consequently, the different MIP archives
designs include the period dates into the filename. The scheme of chunked files in MIP projects is not fixed and depends
on several parameters (the institute, the model, the frequency, etc.). These different schemes lead to unnecessary
overlapping files with a more complex folder reading and wasting disk space.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">nctime</span></code> is based on uncorrupted filename period dates and properly-defined times units, time calendar and
frequency NetCDF attributes.</p>
</div>
</div>
<div class="section" id="key-features">
<h2>Key features<a class="headerlink" href="#key-features" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Time axis squareness</dt>
<dd>The theoretical time axis is always rebuilt depending on the calendar, the frequency, the realm and the time units.
These information are extracted from the DRS tree of your file or the NetCDF attributes. Both time axis are
rigorously compared to detect any mistakes.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code> checks:</dt>
<dd><ul class="first last simple">
<li>all timesteps,</li>
<li>all time increments,</li>
<li>the consistency between the latest theoretical date and the end date from the filename,</li>
<li>the time units (following the CF and MIP requirements),</li>
<li>the time axis type (instantaneous or not),</li>
<li>the absence/presence of time boundaries.</li>
</ul>
</dd>
</dl>
</div>
<dl class="docutils">
<dt>Multi-project</dt>
<dd><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code> is currently provided supporting <a class="reference external" href="http://cmip-pcmdi.llnl.gov/cmip5/docs/cmip5_data_reference_syntax.pdf">CMIP5</a> and <a class="reference external" href="https://www.medcordex.eu/cordex_archive_specifications_2.2_30sept2013.pdf">CORDEX</a> <em>Data Reference Syntax</em> (DRS).
Nevertheless, you can easily add a new &#8220;project&#8221; section in the configuration file to support yours. Please follow
the <a class="reference external" href="https://en.wikipedia.org/wiki/INI_file">INI syntax</a>.</dd>
<dt>No duplicated files</dt>
<dd>A process file is open with both read and write access. This allows a faster file processing just reading the
required metadata and the time axis. We choose to directly overwrite the time axis into the original file
avoiding to duplicate the file. <em>Consequently, the write (*``&#8211;write``</em> and <em>``&#8211;force``</em>) mode definitely modify
the original input files*. The modifications are only apply on time axis and/or time attributes. <code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code>
never reads the other dimensions or the variable(s) described into the NetCDF.</dd>
<dt>Delete time boundaries if necessary</dt>
<dd>An instantaneous time axis do not embed time boundaries. If an instantaneous time axis is detected with time
boundaries, they are deleted using <a class="reference external" href="http://nco.sourceforge.net/">NCO operators</a>. In this case only, the file is
duplicated.</dd>
<dt>CF-MIP time units requirements</dt>
<dd>Into a MIP atomic dataset (i.e., the variable level from the DRS tree) the NetCDF files are splitted depending on
the model and the frequency over a time period. This requires the same time units for all files into the same
atomic dataset (at least) and fixed by the first file of the period. Moreover, the times units has to be
declared with the following format: <code class="docutils literal"><span class="pre">days</span> <span class="pre">since</span> <span class="pre">YYYY-MM-DD</span> <span class="pre">HH:mm:ss</span></code>.</dd>
<dt>Multi-threading</dt>
<dd>To check the time axis of a lot of high frequency files becomes time consuming. We implement multithreading at
file level. Each file is processed by a thread that runs the time axis diagnostic.</dd>
<dt>Tracebacks</dt>
<dd>The threads-processes do not shutdown the main process of <code class="docutils literal"><span class="pre">nctime</span> <span class="pre">axis</span></code> run. If an error occurs on a thread, the
traceback of the child-process is not raised to the main process. To help you to have a fast debug, the tracebacks
of each threads can be raised using the <code class="docutils literal"><span class="pre">-v</span></code> option (see <a class="reference internal" href="usage.html#usage"><span class="std std-ref">Usage and tutorials</span></a>).</dd>
<dt>Use a logfile</dt>
<dd>You can initiate a logger instead of the standard output. This could be useful for automatic workflows. The
logfile name is automatically defined and unique (using the the job&#8217;s name, the date and the job&#8217;s PID). You can
define an output directory for your logs too.</dd>
<dt>Network analysis</dt>
<dd>Each filename from the variable directory covers a part of the time period. <code class="docutils literal"><span class="pre">nctime</span> <span class="pre">overlap</span></code> builds a directed
graph, that is, graphs with directed edges. Each node on the graph is a file defined by its first date and the
date next to the end.</dd>
<dt>Looking for the shortest path</dt>
<dd><code class="docutils literal"><span class="pre">nctime</span> <span class="pre">overlap</span></code> uses a directed graph to find the shortest &#8220;date path&#8221; between all nodes, covering the whole
time period. All excluded files from this &#8220;date path&#8221; are overlapping files. In the case of a gap in the time
period, <code class="docutils literal"><span class="pre">nctime</span> <span class="pre">overlap</span></code> adds the possibility to use the longest subtree from the start date instead (i.e., the
most consecutive files).</dd>
<dt>Overlap deletion</dt>
<dd>All detected overlaps can be automatically removed using the <code class="docutils literal"><span class="pre">--remove</span></code> argument (see <a class="reference internal" href="usage.html#usage"><span class="std std-ref">Usage and tutorials</span></a>).</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="nctime toolbox" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Levavasseur, G..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.9.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="static/jquery.js"></script>
      <script type="text/javascript" src="static/underscore.js"></script>
      <script type="text/javascript" src="static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>